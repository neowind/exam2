<!DOCTYPE html>
<html>
<head>
    <title>Hotels</title>
</head>
<body>
    <script src="Scripts/handlebars-v4.0.5.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script>
    
    <script id="hotels-template" type="text/x-handlebars-template">
        {{#each this}}
        <table>
            <tr>
                <th>
                    {{Name}}
                </th>
                <th>
                    {{Rating}}
                </th>
                <th>
                    {{LowestPrice}}
                </th>
                <th>
                    {{Location}}
                </th>
                <th></th>
            </tr>
        </table>
        {{/each}}
    </script>

    <div class="content-placeholder"></div>

    <script>
        var uri = '../api/ajax';

        // Grab the template script
        var theTemplateScript = $("#hotels-template").html();

        //complie template
        var theTemplate = Handlebars.compile(theTemplateScript);

    $(document).ready(function () {
      // Send an AJAX request
      $.getJSON(uri)
          .done(function (data) {
            // On success, 'data' contains a list of products.
            //$.each(data, function (item) {
            //    var theCompiledHtml = theTemplate(item);
            //    $('.content-placeholder').html(theCompiledHtml);
            //});
              //var data2 = {"Name": "Dusit Thani Hotel Pattay", "Rating": 8.4, "LowestPrice": 2800.0, "Location": "Pattaya" };
              var theCompiledHtml = theTemplate(data);

              //// Add the compiled html to the page
              $('.content-placeholder').html(theCompiledHtml);

          });
    });

    </script>
</body>
</html>
